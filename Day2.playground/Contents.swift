let boxIDs = ["xrysntkqrduheficajodiglvzw", "xzymntkqrbuhefmcajodiflvzw", "xpysetkyrbuhefmcajodiglvgw", "xtysnykqrbuhefmczjodiglvzw", "xpysntkqyvuhefmjajodiglvzw", "xpysntkqrbuqjfmcajodiglvzu", "xpysntkqrbuhefmvaoodimlvzw", "xplsntkqrbuhefmcajohimlvzw", "cpysntkqrbuhefmcajodiglpmw", "xpysndkqrbuhefmcajzdiglmzw", "xpysntkqrbuhsfmctjoqiglvzw", "xpysztkkrbuhewmcajodiglvzw", "xpysntkguzuhefmcajodiglvzw", "xpysnbkvrbuhyfmcajodiglvzw", "xpgsntkqrbphefmcajodzglvzw", "xpysntkqrbdhefmcajodvgqvzw", "xpmsntkqrbuhedmcajodiglvnw", "wpysntkqmbuheemcajodiglvzw", "xpysntdvrbuhdfmcajodiglvzw", "xpbsetkqrbuhefmcayodiglvzw", "xpasntkqrbuhefmcajydigovzw", "xpylntkqrbuhefmcajudiglnzw", "xpysqtkqrbuoefmcrjodiglvzw", "xlysntkqrbuhefmuejodiglvzw", "xpysntkqrzuhewmcajodaglvzw", "xpysotkqrbuhefmxajowiglvzw", "xpysntkqrbuhefmcajodinlyza", "xpysntkqrbuhemmmajofiglvzw", "xpysntkqcbuhezmcyjodiglvzw", "xpysntyqrbuhefmcajodiglvfn", "xpysntkqrbudefmcarodcglvzw", "xpysntkqrjuhefkcajodiglvzg", "xpysntkqrbuhefmcahooiglvow", "xpysntkqrqfhevmcajodiglvzw", "xpysntlqrbuhefmcajodivlvzu", "xpyjotkqrbuhefmcavodiglvzw", "xpysntqqrbuhebmcgjodiglvzw", "xpjsnikqbbuhefmcajodiglvzw", "xpysntkqrbuhefmcalodeflvzw", "xpysntktrbuhefmcaqoviglvzw", "xpysntkqrbuhefmcrjogiglvzk", "xpysntkqrjuhekmcajodixlvzw", "xpypntyqrbuhefmcajodigzvzw", "cpysnwkqrbuhefmcajodiglvww", "xpysntkqqbuqefmcajodiglvlw", "xpysntkqrbuhvfmcajldiglvzh", "xpysntkqrbuhefmzmjodislvzw", "xpysnnkqrbuhefmcajodjplyzw", "xpysntdqobuhefmcajbdiglvzw", "xpyzntknrbuhefmcajodigtvzw", "xpysntkqbbohefmcajodialvzw", "xpysntkqryuhefmcayoxiglvzw", "xxysntkqrbuhefmcajodiglgzl", "jzysntkqrbuhmfmcajodiglvzw", "xpysntocrbuhefmcakodiglvzw", "xpysntkqrbuheomrgjodiglvzw", "xpysntkerbuhefmxajoduglvzw", "xpysntkqobuhefpcajodiglvzd", "xpysntkqrbvhefmcajopislvzw", "xpysntkqrbuhefucqjodiglvqw", "xpysvtkqrbuhdfmcajokiglvzw", "xqysnjkqrbuhemmcajodiglvzw", "xpysnteqxbuhefmcajodiglvdw", "xpysntkqrbuhefzcajodignvzc", "xpysntkqrbuledmcajoyiglvzw", "xpysntkqrbuhofmcajkdigpvzw", "xpysmtkqrbuhefmcajodaglvze", "xlysntiqrbuhefmqajodiglvzw", "xpysntvqrbugefmcajodiglizw", "xpysntkqrbuhefmuwjndiglvzw", "ypysntkqrbuhefmbajodislvzw", "xpycntkqrbuhemmcaqodiglvzw", "xpysntkqrbuhefmcajobivdvzw", "xpysnfkprbuhefmcajodiglvkw", "xtysntkwrjuhefmcajodiglvzw", "xpysntkqrbqhefmcaxodiulvzw", "xpysntkqrbuhefmcajsdigkvkw", "xpysnekqrbugefmcajwdiglvzw", "xpysntkqjbuhefmcajoduglbzw", "xpysntkqrbohlfmcajodiggvzw", "xpysntkqrbfhefmcajodiglhnw", "xpmsntkirbusefmcajodiglvzw", "xpnsntkqrbehefmcajodigrvzw", "xpytntgqrbuhefmcajodigllzw", "xpysntkqrbuhefmcejodiglvvm", "xpyvntkqrbuhefmmajodiglmzw", "rpysntkirbuhefmcajodiglyzw", "xpysntkqrbuhefmcajoznglvzz", "xpysntkqrbmhefmcafodigwvzw", "xpysntkqrbuhetmcarodiglvzx", "xpysntnqrbuhefmcajogiglfzw", "xpysutkqjbuheomcajodiglvzw", "xpysnqkprbuhefkcajodiglvzw", "xpysntuqrbuhemmcajodyglvzw", "spysntkqrbupefmcajodigpvzw", "qpygntkqrbuhefmcajodqglvzw", "xpysnteqrbuhefmcatodiylvzw", "xpysntkqrbusefsckjodiglvzw", "xpysntkqrbubeflcajodiglvcw", "xpysntwqrbuhefmcajodigekzw", "xpysntkqrbuhefmcnjodiguvtw", "xpysntkqrbqhefmkasodiglvzw", "xmysntkqrbuhefmkcjodiglvzw", "xpysntkqrquhefmcajodiouvzw", "xpysnnkqrbuhefmcajodiplyzw", "xpysntkorbuhefaqajodiglvzw", "npysntkqobuhefmcajodiglvfw", "xlysntkqrbuhefmcazbdiglvzw", "xpysftkqrbihefmcajodiglezw", "xpysolqqrbuhefmcajodiglvzw", "xpysntkqrwuheixcajodiglvzw", "xoysntkqibuhefmcqjodiglvzw", "xpysntkqrbupefmcajodtulvzw", "xpyentkqrbuhvfmcajudiglvzw", "xpysntksrbuhefmgajodqglvzw", "xpysntkqrbuhcfmcvjodigldzw", "gpyrntdqrbuhefmcajodiglvzw", "vpysntvqrbuhefmcajndiglvzw", "xpvsntkqrbuhefvcajhdiglvzw", "xpysntkqrbubefmcajowiglvzl", "xpysndkqibuhefmcajodiblvzw", "xpysntkqrbuhefmldjodjglvzw", "xpysntzqrbuhefmcyjomiglvzw", "xpysntkqrbuhefmedjodiwlvzw", "xpysntklrbuhefmcyjodiglvjw", "xpypnlkqrbehefmcajodiglvzw", "xpysntkqrbuhefycacodiglvzz", "ypysntkqrbuhefmcajadiglvew", "xpysntkqobuhefmcajadiglhzw", "xpysbtxlrbuhefmcajodiglvzw", "xpysntkqrbuhefdcajoviglvww", "xpysntkqrbuhefmcaaodiblvzc", "wpysntkqrbuhefmcajddiglvbw", "wpysntmqrbuhefmcajodiglvza", "epysntkqrbuhemmcajoniglvzw", "vpysntkqrbuhejmcajodiglvzo", "xpysntkqrbuhebmmajodiglazw", "lpysntkqrguhtfmcajodiglvzw", "xpksndkqpbuhefmcajodiglvzw", "xpydnukqrbuhefmcajmdiglvzw", "xpysnmkqrbuhefioajodiglvzw", "xpysntkqruuhefmcajodyglvzx", "xpysntkqrmuhefmcmjidiglvzw", "xpysntksrbupefmcajodiplvzw", "xpykntkqrbuhefmmajodiglxzw", "xpssntkqrbuhefmzajodiglvgw", "xpysntkqrbuhefmcrjodigovzd", "xpysntkqrbuhefmpajodirlvqw", "xpysnskqrruhefmtajodiglvzw", "xpysnzkqrbuhezmcajodiglvzj", "xpysntkcrburefmckjodiglvzw", "xpysntkqrbuhefecpoodiglvzw", "xpysnjkqrbuhexmcajodigrvzw", "xpysztkqhbuhefmcanodiglvzw", "xpysntkqrbuhefmcajozyelvzw", "xpyuntkmrbuhefmcajodigcvzw", "xpysnykmrbuhefmaajodiglvzw", "jpysntkqrbuhefmcajodigumzw", "xtysntkqhbuhefmcajodiglvzz", "xpysntkqrbqhefmcxjouiglvzw", "xpysntkqreujefmmajodiglvzw", "xnysntzqrbuhefacajodiglvzw", "xpysntkqriuhefmcajkdiqlvzw", "xposntkqrbuheffcajodihlvzw", "xpysntkqpquhefmcajodrglvzw", "xpysjtkqrbudefmcajouiglvzw", "xpysnxkqrbulefmcacodiglvzw", "xpygntkqrbuhefmfajzdiglvzw", "xpysntkqrbuhefmuayodiglyzw", "xpysnbksrbuhefmcajediglvzw", "xkyzntkqrbuhefmcajodiglvzz", "xpysntkqrbehlxmcajodiglvzw", "xpysntkqryuhefmcaxodiklvzw", "xpysntdqrbuhefmcjjodiglvzt", "xpysntkqrbuhefmcauodigqvzy", "xpysftkqrbuhefmcajodrgvvzw", "xpysntkqrbuhefmczjodiglivw", "xpysatkorbuhefmcyjodiglvzw", "xhysntkqrbthefmcajodxglvzw", "xpysnpkqrbuhefmcajoqyglvzw", "xpyyntkqrbuhefmcjjodxglvzw", "xpysntkqrozhefhcajodiglvzw", "xpymftkqrbuhefmcajodiglvzo", "xpysntkqrbuhvfmcajodiyllzw", "xpysatsqrbuhefmcajodiglvzo", "cpysntkqqbuhefmcajodlglvzw", "xpysntkyrblhefmcajodiglvzz", "xpysntkfrbuhefbcajodiglbzw", "upysotkqrbuhpfmcajodiglvzw", "xpysdokqrbuheflcajodiglvzw", "xrysntkqrbuhefpcanodiglvzw", "xdysntkqrbuhefpcajodiglmzw", "xpyynteqrbjhefmcajodiglvzw", "xpysntkqrbuhefkcajodielvhw", "xplsktkqrbuhefmcajodtglvzw", "xpysrtkqrbuhefmcdjodiglvzx", "upysntkmrbuhefmcajodiglvzt", "xnysnpkqrbusefmcajodiglvzw", "xtysntnqrbuhexmcajodiglvzw", "xpysngkmrbfhefmcajodiglvzw", "xpysnhkhrbuhefmcajodiplvzw", "xpysntvqrbuhefmcaoodsglvzw", "xpyzntkqrbuhefmcajlviglvzw", "xpysndkqrbuievmcajodiglvzw", "xpysntkqrsuhcfzcajodiglvzw", "xpysntkqlbuhefmcajjdlglvzw", "xpysntkqrbuhifmcajoliylvzw", "xpysntkqxbphefmcajodialvzw", "bnyswtkqrbuhefmcajodiglvzw", "upysatkqrbuhefmcajodvglvzw", "xpysntkqqbuhefmcajodxglzzw", "xpysntkqryuhefmcafodinlvzw", "xpzsntkqrcuhefmcajokiglvzw", "xpynntkqrbuheimccjodiglvzw", "xpysnfkqduuhefmcajodiglvzw", "xpywntkqrbuhefmcajodigllzz", "xpysftkqrbahefmcajsdiglvzw", "xpysntkkrbutefmcljodiglvzw", "xfysntkqrbbhkfmcajodiglvzw", "xpysgtksrbuhefkcajodiglvzw", "xpysntyqrbuhefmcajodijlvzg", "xpysnpkqobuhefmcljodiglvzw", "xvysntkqrbuhefmcsjodiclvzw", "xpysntkqrtuhwfmcajodillvzw", "xpysntkprbuhejmcajouiglvzw", "apysntkqrbuhefmcaboviglvzw", "xpysqykqrbuhefmcajodirlvzw", "xpysntkqrluhefmcajowiglvzf", "dpysnokqrbuhefmcajoaiglvzw", "xppsntkqmbuheumcajodiglvzw", "xpysntkqrbuhlymcaoodiglvzw", "dpysntkqrbuhmfmcajodiglvzt", "xpysltbqrbuhefmcajoliglvzw", "xpysntpqrbuhefmcnjoniglvzw", "xpysntpqrbuhektcajodiglvzw", "xpysntkhrbshefmqajodiglvzw", "zpysntuqrbuhefmcajmdiglvzw", "xpysxtdqrbuhefmcajoyiglvzw", "xpysntkubbumefmcajodiglvzw", "xpysntkqzouhefmcajsdiglvzw", "xpysntkqrbuhefmcojoziglvyw", "jpysntkqrmuhefmcajodidlvzw", "xpmsttkqrhuhefmcajodiglvzw", "xpysntkqlbuhefmcajgdiflvzw", "xpysntxkrbuhefmcauodiglvzw", "xpysotkqubuhefscajodiglvzw", "xjysntkqrbvheemcajodiglvzw", "xpykntkqrbuhefmcpjodiglvow", "xplsntkqrbuvefmcajediglvzw", "upysntwqrbuhefmfajodiglvzw"]

// Part 1: Find the checksums
func calculateChecksum(_ idCodes: [String]) -> Int {
    var doubles = 0
    var triples = 0
    
    idCodes.map { (boxID) in
        var doubleTrue = false
        var tripleTrue = false
        for char in boxID {
            let count = boxID.filter { $0 == char }.count
            if count == 2 {
                doubleTrue = true
            }
            if count == 3 {
                tripleTrue = true
            }
        }
        doubles += doubleTrue ? 1 : 0
        triples += tripleTrue ? 1 : 0
    }
    return doubles * triples
}

let checksum = calculateChecksum(boxIDs)

// Part 2: Box finder
func findTheBoxes(_ idCodes: [String]) -> String {
    var result = ""
    var differceCount = 0
    
    for boxID in idCodes {
        if differceCount == 1 {
            break
        }
        for code in idCodes {
            differceCount = zip(boxID, code).filter{$0 != $1}.count
            if differceCount == 1 {
                let diff = Set(boxID).subtracting(code)
                if let charToRemove = diff.first {
                    result = boxID
                    if let foo = result.index(of: charToRemove) {
                        result.remove(at: foo)
                        break
                    }
                }
            }
        }
    }
    return result
}

let theBoxes = findTheBoxes(boxIDs)

print("Boxes checksum is: \(checksum)")
print("Matching box ID is: \(theBoxes)")
